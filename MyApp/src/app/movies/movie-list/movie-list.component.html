<!-- File: frontend/src/app/movies/movie-list/movie-list.component.html -->

<div class="pt-20 p-4 space-y-4">
  <!-- Movie Grid -->
  <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
    <ng-container *ngFor="let m of movies">
      <a [routerLink]="['/movies', m.movieId]"
         class="block bg-white rounded-lg shadow hover:shadow-lg transition">
        <img [src]="imageBaseUrl + m.posterUrl"
             [alt]="m.title"
             class="w-full h-40 object-cover rounded-t-lg" />
        <div class="p-2">
          <h3 class="font-semibold text-sm line-clamp-1">{{ m.title }}</h3>

          <!-- Only show “Glarky’s Rating” if masterRating exists -->
          <ng-container *ngIf="getMasterRating(m) as score; else noMasterRating">
            <p class="text-xs text-gray-600 mt-1">
              Glarky’s Rating: {{ score }}/100
            </p>
          </ng-container>
          <ng-template #noMasterRating>
            <p class="text-xs text-gray-400 mt-1"><em>Not rated yet</em></p>
          </ng-template>
        </div>
      </a>
    </ng-container>
  </div>

  <!-- Pagination Controls -->
  <div class="flex justify-center items-center space-x-4 mt-4">
    <button (click)="prevPage()"
            [disabled]="page <= 1"
            class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50">
      Previous
    </button>
    <span>Page {{ page }} of {{ totalPages }}</span>
    <button (click)="nextPage()"
            [disabled]="page >= totalPages"
            class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50">
      Next
    </button>
  </div>

  <p *ngIf="error" class="text-red-600 text-center">{{ error }}</p>
</div>
